<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <title>Relay of Regret - 2023</title>
  </head>
  <body>
    <div class="container text-center">
      <div class="row">
        <div class="col">
          <h1>Relay of Regret 2023</h1>
        </div>
      </div>
    </div>
    <br>
    <div class="container-fluid text-center">
        <div class="row">
            <h2>We're at it again!<br><span id="kickoff">Friday August 18 2023 17:00:00 GMT+0000</span></h2>
            <br>
            <h3>Set your clocks!</h3>
        </div>
    </div>
    <br>
    <hr>
    <br>
    <div class="container text-center">
        <div class="row">
            <div class="col">
                <h3>About The Relay of Regret:</h3>
                <p>The Relay of Regret is a relay Stream-A-Thon that jumps from community-to-community to help raise money for charity.<br>
                    Started in 2021, the goal is to raise as much money as possible for good and bring communities together for an amazing week of content and fun.<br><br>
                </p>
                <p>
                    In 2021, we raised over <b>Â£10,000</b> for <u>2</u> charities.<br>
                    In <a href="/2022">2022</a> we raised <b>$42,294.93</b> across the <u>8</u> charities we supported!<br><br>
                    Like last year, this year, we're going <b>bigger</b>.<br>
                    We're going <b>harder</b>.<br>
                    Two teams, 15 streamers each, competing head-to-head to see who can raise the most!<br><br>
                    Grab your snacks and buckle up. It's going to be a long week.<br><br>
                </p>
                <p>
                    You can donate to any charity at any time, but each day you will see a FEATURED charity that we will be promoting.<br>
                    Allowing you to back the charities you care about most, while also giving each charity their own time to shine.<br>
                    All the money goes direct to the charities via Tiltify. We do not see a penny.<br>
                    We do not even touch the finances in any regard, we are a team using the fundraising websites to get the charities the money they need.<br>
                </p>
            </div>
        </div>
    </div>
    <br><br>
    <div class="container-fluid text-center">
      <div class="row">
        <div class="col">
            <hr>
            <p>
                Hosted & developed by <a href="https://lizz.link/whoami">Liizzii</a>.<br>
                <sub>Site generated at <span id="gentime">{{ now }}</span> |
                    <a href="https://github.com/LizzyTrickster/relay-of-regret.live">How it's made</a></sub>
            </p>
        </div>
      </div>
    </div>

    <script>
        // TODO move all this into a js file
        function ordinal_suffix_of(i) {
            var j = i % 10,
            k = i % 100;
            if (j == 1 && k != 11) {
                return i + "st";
            }
            if (j == 2 && k != 12) {
                return i + "nd";
            }
            if (j == 3 && k != 13) {
                return i + "rd";
            }
            return i + "th";
        }

      function pad(x){ if(x < 10) return "0"+x; return x;}
      const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
        const months = ["Jan", "Feb", "Mar", "April", "May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]
      const d = new Date("{{ now }}");
      document.getElementById("gentime").innerHTML = d.toString();

      function getFormattedDateString(date) {
          var day_and_month = ordinal_suffix_of(date.getDate())+" "+months[date.getMonth()]+" "+date.getFullYear()
        return days[date.getDay()] + ' ('+day_and_month+') ' + pad(date.getHours()) + ':' + pad(date.getMinutes());
      }
      function getTimeSlot(start_time, timeframe){
        var date = new Date(start_time);
        var f = getFormattedDateString(date);
        date.setHours(parseInt(date.getHours())+parseInt(timeframe));
        var s = getFormattedDateString(date);
        return f + " - " + s;
      }

      const slots = document.getElementsByName("timeslot");
      for (let e=0; slots[e]; e++) {
          slots[e].innerText = getTimeSlot(slots[e].getAttribute("timeslot"), slots[e].getAttribute("timespan"));
      }
      // End

      //
        const kickoff = document.getElementById("kickoff")
        kickoff.innerText = getFormattedDateString(new Date(kickoff.innerText))

    </script>
  </body>
</html>
